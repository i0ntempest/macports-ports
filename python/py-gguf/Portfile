# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem          1.0
PortGroup           python 1.0
PortGroup           github 1.0

github.setup        ggerganov llama.cpp 4567 b
github.tarball_from archive
name                py-gguf
version             0.15.0
revision            0
license             MIT
maintainers         {i0ntempest @i0ntempest} openmaintainer
platforms           {darwin any}
supported_archs     noarch

description         Python library for writing binary files in the GGUF (GGML Universal File) format
long_description    {*}${description}
homepage            https://ggml.ai

checksums           rmd160  7c33893bbd2b4f9a9b3f4e6abc867f2704566353 \
                    sha256  02ff41ea4f7271ef3b81e2434c366cae22fb1ba98f4708f760b45d5e7e7579fd \
                    size    20508421

python.versions     39 310 311 312 313
python.pep517_backend
set build_folder    gguf-py
build.dir           ${worksrcpath}/${build_folder}

if {${name} ne ${subport}} {
    depends_build-append \
        port:py${python.version}-setuptools \
        port:py${python.version}-poetry-core

    depends_lib-append \
        port:py${python.version}-numpy \
        port:py${python.version}-tqdm \
        port:py${python.version}-yaml \
        port:py${python.version}-sentencepiece

    livecheck.type  none
}

livecheck.version   ${version}
livecheck.url       https://raw.githubusercontent.com/${github.author}/${github.project}/refs/heads/master/${build_folder}/pyproject.toml
livecheck.regex     {version\s*=\s*["'](\d+(?:\.\d+)*)["']}
