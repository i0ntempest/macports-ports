# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:et:sw=4:ts=4:sts=4

PortSystem          1.0
PortGroup           github 1.0
PortGroup           xcode 1.0

github.setup        inket MacSymbolicator 2.6
revision            0
categories          devel aqua
maintainers         {i0ntempest @i0ntempest} openmaintainer
license             GPL-2

description         Symbolicate macOS/iOS crash reports easily
long_description    A simple Mac app for symbolicating macOS/iOS crash reports. \
                    supports symbolicating .crash and .ips crash reports, and \
                    also sample and spindump reports.

checksums           rmd160  b2e0859c6a773f2c019aed0c038f02d8a8718365 \
                    sha256  2d75ae08bbb0892dce28fe14a333736687d6c8fb01c1e4382524df099c60921b \
                    size    1265658

build.pre_args-append \
                    -derivedDataPath ./DerivedData
xcode.scheme        ${xcode.target}
xcode.target        ${name} ${name}CLI
xcode.configuration Release

if {${os.major} >= 22} {
    xcode.build.settings-append \
        CODE_SIGN_IDENTITY=-
} else {
    xcode.build.settings-append \
        CODE_SIGN_IDENTITY= CODE_SIGNING_REQUIRED=NO
}

destroot {
    file copy ${worksrcpath}/build/${xcode.configuration}/${name}.app ${destroot}${applications_dir}
    ln -s ${applications_dir}/${name}.app/Contents/MacOS/MacSymbolicatorCLI ${destroot}${prefix}/bin/macsymbolicator-cli
}
